#!/bin/bash
( paste <( zcat /fast/groups/ag_kircher/hemophilia/raw_data/180212_NS500488_0557_AHYHNYAFXX/Undetermined_S0_L00${1}_R1_001.fastq.gz | cut -c 1-120 ) <( zcat /fast/groups/ag_kircher/hemophilia/raw_data/180212_NS500488_0557_AHYHNYAFXX/Undetermined_S0_L00${1}_I1_001.fastq.gz ) <( zcat /fast/groups/ag_kircher/hemophilia/raw_data/180212_NS500488_0557_AHYHNYAFXX/Undetermined_S0_L00${1}_R2_001.fastq.gz | cut -c 1-120 ) | awk '{ count+=1; if ((count == 1) || (count == 3)) { print $1 } else { print $1$2$3 }; if (count == 4) { count=0 } }' | /fast/groups/ag_kircher/hemophilia/scripts/pipeline2.0/SplitFastQdoubleIndexBAM.py --bases_after_index=ATCTCGTATGCCGTCTTCTGCTTG --bases_after_2ndindex='' -l 10 -m 0 -s 131 --summary -i sample_index.lst -q 10 -p --remove | /fast/groups/ag_kircher/hemophilia/scripts/pipeline2.0/MergeTrimReadsBAM.py --mergeoverlap -p > sample_l${1}.bam ) 2> processing_stats_l${1}.log
